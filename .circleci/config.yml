version: 2.1

parameters:
  environment:
    type: string
    default: "staging"
	enum: ["staging", "production"]

jobs:
  build:
    docker:
      - image: circleci/node:latest
    steps:
	  -checkout 
	  - run:
	    name: Install Dependencies
	    command: |
		  npm install
  deploy:
    docker:
      - image: circleci/node:14
    parameters:
      environment:
        type: string
    steps:
      - when:
          condition:
            or:
              - equal: [ << pipeline.parameters.env >>, "staging" ]
              - equal: [ << pipeline.parameters.env >>, "production" ]
          steps:
            - run: echo "Deploying to $<< pipeline.parameters.env >> environment."
